:80 {
    # Enable compression
    encode gzip zstd
    
    # Serve static files from /srv (Caddy default)
    root * /srv
    
    # Handle client-side routing (React Router)
    try_files {path} {path}/ /index.html
    
    # File server with precompressed support
    file_server {
        precompressed br gzip
    }
    
    # Cache static assets (JS, CSS, images, fonts)
    @static {
        path *.js *.css *.png *.jpg *.jpeg *.gif *.ico *.svg *.woff *.woff2 *.ttf *.eot
    }
    header @static Cache-Control "public, max-age=31536000, immutable"
    
    # Security headers
    header {
        X-Frame-Options "SAMEORIGIN"
        X-Content-Type-Options "nosniff"
        X-XSS-Protection "1; mode=block"
        Referrer-Policy "strict-origin-when-cross-origin"
    }
}

# Example for production with HTTPS and custom domain
# yourdomain.com {
#     encode gzip zstd
#     
#     # API routes - proxy to backend
#     handle_path /api/* {
#         reverse_proxy backend:3000
#     }
#     
#     # Serve static files
#     root * /srv
#     try_files {path} {path}/ /index.html
#     file_server
#     
#     # Automatic HTTPS
#     tls your-email@example.com
# }
